<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Thumbnail Renderer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="walk_renderer.js"></script>
    <style>
        body { margin: 0; background: #0a0a12; }
    </style>
</head>
<body>
    <script>
        // Expose renderWalk globally for Puppeteer
        window.renderWalk = function(points, colorIdx) {
            // Convert points to Float32Array
            let positions;
            if (points instanceof Float32Array) {
                positions = points;
            } else if (Array.isArray(points)) {
                positions = new Float32Array(points.length * 3);
                for (let i = 0; i < points.length; i++) {
                    const pt = points[i];
                    if (Array.isArray(pt)) {
                        positions[i*3] = pt[0] || 0;
                        positions[i*3+1] = pt[1] || 0;
                        positions[i*3+2] = pt[2] || 0;
                    } else if (pt && typeof pt === 'object') {
                        positions[i*3] = pt.x || 0;
                        positions[i*3+1] = pt.y || 0;
                        positions[i*3+2] = pt.z || 0;
                    }
                }
            } else {
                return null;
            }
            return renderWalkToDataURI(positions, colorIdx || 0, 400);
        };
    </script>
</body>
</html>
